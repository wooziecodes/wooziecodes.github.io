<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{TITLE}} | Arif Woozeer</title>
    <link rel="stylesheet" href="../styles/blog-post.css">
</head>
<body>
    <article class="post" data-length="long">
        <nav class="post-nav">
            <a href="../../about.html">About</a>
            <a href="../../blog.html">Writing</a>
            <a href="../../research.html">Research</a>
            <a href="../../reading.html">Reading</a>
        </nav>

        <header class="post-header">
            <h1 class="post-title">{{TITLE}}</h1>
            <div class="post-meta">
                <span class="post-date">{{DATE}}</span>
                <span class="reading-time">{{READING_TIME}} min read</span>
            </div>
        </header>

        <!-- Optional: Epigraph for opening quote -->
        <!--
        <blockquote class="epigraph">
            <p>{{QUOTE_TEXT}}</p>
            <cite>{{QUOTE_AUTHOR}}</cite>
        </blockquote>
        -->

        <!-- Table of Contents - auto-generated from h2 elements -->
        <nav class="toc">
            <button class="toc-toggle">Table of Contents</button>
            <p class="toc-title">Contents</p>
            <ol class="toc-list" id="toc-list">
                <!-- TOC items generated by JavaScript -->
            </ol>
        </nav>

        <div class="post-content">
            {{CONTENT}}
        </div>

        <footer class="post-footer">
            <p><a href="../../blog.html">&larr; Back to writing</a></p>

            <!-- Optional: Related posts
            <div class="related-posts">
                <p class="related-posts-title">More in {{CATEGORY}}</p>
                <ul class="related-posts-list">
                    <li><a href="../{{RELATED_SLUG}}/">{{RELATED_TITLE}}</a></li>
                </ul>
            </div>
            -->
        </footer>
    </article>

    <script>
        // Auto-generate Table of Contents
        (function() {
            const content = document.querySelector('.post-content');
            const tocList = document.getElementById('toc-list');
            const headings = content.querySelectorAll('h2');

            if (headings.length === 0) {
                document.querySelector('.toc').style.display = 'none';
                return;
            }

            headings.forEach((heading, index) => {
                // Add ID to heading for linking
                const id = 'section-' + (index + 1);
                heading.id = id;

                // Create TOC item
                const li = document.createElement('li');
                const a = document.createElement('a');
                a.href = '#' + id;
                a.textContent = heading.textContent;
                li.appendChild(a);
                tocList.appendChild(li);
            });

            // Smooth scroll for TOC links
            tocList.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                });
            });

            // Mobile TOC toggle
            const toggle = document.querySelector('.toc-toggle');
            toggle.addEventListener('click', function() {
                this.classList.toggle('active');
                tocList.classList.toggle('active');
            });
        })();
    </script>
</body>
</html>
